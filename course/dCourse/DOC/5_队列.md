# é˜Ÿåˆ— Queue

## 1. ç‰¹ç‚¹

åˆ°åº•ä»€ä¹ˆæ˜¯é˜Ÿåˆ—å‘¢ï¼Ÿä»¥å‰æ€»ç»“è¿‡æ ˆæ˜¯åªèƒ½æ“ä½œä¸€ç«¯çš„ï¼Œå¯æ˜¯é˜Ÿåˆ—å°±æ˜¯é™åˆ¶æ€§çš„æ“ä½œä¸¤ç«¯ã€‚ä¸€ç«¯åªèƒ½è¿›ï¼Œä¸€ç«¯åªèƒ½å‡ºã€‚

![image-20230530235613231](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230530235613231.png)

![image-20230530235731429](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230530235731429.png)

> ç›¸æ¯”è¾ƒå‰é¢å‡ ä¸ªï¼Œè¿™ä¸ªç‰¹ç‚¹ä¸æ˜¯å¾ˆéš¾ã€‚
>
> æœ¬è´¨å°±æ˜¯ä¸€ç«¯åªèƒ½è¿›ï¼Œä¸€ç«¯åªèƒ½å‡ºã€‚FIFOã€‚
>
> é˜Ÿåˆ— â†’ FIFO
>
> æ ˆ â†’ LIFO

## 2. å®ç°

### 2-1 æ•°ç»„å®ç°

ä½¿ç”¨æ•°ç»„è¿™ç§å®Œå…¨å¯ä»¥å®ç°é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±è¦æ€è€ƒä¸€ä¸ªé—®é¢˜ã€‚å’Œæ ˆä¸€æ ·ï¼Œæ•°ç»„å·¦å³ï¼Œå“ªä¸ªå¤´æ§åˆ¶è¿›ï¼Ÿå“ªä¸ªå¤´æ§åˆ¶å‡ºå‘¢ï¼Ÿè¿™ä¸ªå…¶å®ä¹Ÿè¦çœ‹æ•ˆç‡ï¼ˆ**æ—¶é—´å¤æ‚åº¦**ï¼‰ã€‚ğŸ‘‡ğŸ»

![image-20230531000130046](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531000130046.png)

æ ¹æ®ä¸Šé¢å¯ä»¥å¾—çŸ¥ï¼Œå…¶å®æ— è®ºä½ æ€è€ƒä»å·¦é¢è¿˜æ˜¯ä»å³é¢ã€‚ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™é‡ŒæŒ‰ç…§ä¸€èˆ¬çš„æ€è·¯ï¼Œå·¦è¾¹å‡ºï¼Œå³è¾¹è¿›ï¼æ¥å®ç°ä¸€ä¸‹ã€‚

```java
/**
 * è¿™é‡Œä½¿ç”¨ä»¥å‰è‡ªå·±å®ç°çš„åŠ¨æ€æ•°ç»„æ¥å®ç°é˜Ÿåˆ—è¿™ä¸ªç»“æ„
 *
 * @param <T>
 */
public class _01_ArrayQueue<T> implements Queue<T> {

    // è¿™é‡Œä½¿ç”¨è‡ªå·±å®ç°çš„çš„åŠ¨æ€æ•°ç»„

    private _04_MyArrayResize<T> data;

    public _01_ArrayQueue() {
        data = new _04_MyArrayResize<>();
    }

    @Override
    public int getSize() {
        return data.getSize();
    }

    @Override
    public boolean isEmpty() {
        return data.isEmpty();
    }


    @Override
    public void enqueue(T e) {
        data.addLast(e);
    }

    @Override
    public T dequeue() {
        return data.removeFirst();
    }

    @Override
    public T getFront() {
        return data.get(0);
    }

    @Override
    public String toString() {
        StringBuilder res = new StringBuilder();
        res.append("Queue é˜Ÿé¦–[");
        for (int i = 0; i < data.getSize(); i++) {
            res.append(data.get(i));
            if (i != data.getSize() - 1) {
                res.append(", ");
            }
        }
        res.append("]");
        return res.toString();
    }
}

```

> ä¸Šé¢ä»£ç æ²¡æœ‰ä»»ä½•éš¾ç‚¹ã€‚ä¸€ä¸‹å­å°±å†™å®Œäº†ã€‚

### 2-2 é“¾è¡¨å®ç°

é“¾è¡¨çš„è¯ä¹Ÿå’Œæ•°ç»„ä¸€æ ·ï¼Œåˆ°åº•ä»å“ªé‡Œå®ç°ï¼Ÿçœ‹ä¸‹å›¾

![image-20230531001931865](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531001931865.png)

å¾—å‡ºçš„ç»“è®ºæ˜¯æ— è®ºå“ªä¸€ç§éƒ½æ˜¯ä¸€æ ·çš„ï¼Œäºæ˜¯è¿™é‡Œå·¦è¾¹å‡ºé˜Ÿï¼Œåé¢å…¥é˜Ÿã€‚

ä¸‹é¢ç›´æ¥å®ç°

```java
/**
 * ä½¿ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—
 *
 * @param <T>
 */
public class _02_LinkedListQueue<T> implements Queue<T> {
    // è¿™é‡Œä½¿ç”¨è‡ªå·±å·²ç»å®ç°è¿‡çš„æœ‰è™šæ‹Ÿå¤´èŠ‚ç‚¹çš„
    private _03_DummyLinkedList<T> data;

    public _02_LinkedListQueue() {
        data = new _03_DummyLinkedList<>();
    }

    @Override
    public int getSize() {
        return data.getSize();
    }

    @Override
    public boolean isEmpty() {
        return data.isEmpty();
    }

    @Override
    public void enqueue(T e) {
        // è¿™é‡Œ
        data.addLast(e);
    }

    @Override
    public T dequeue() {
        return data.removeFirst();
    }

    @Override
    public T getFront() {
        return data.get(0);
    }

    @Override
    public String toString() {
        StringBuilder res = new StringBuilder();
        res.append("Queue é˜Ÿé¦–[");
        for (int i = 0; i < data.getSize(); i++) {
            res.append(data.get(i));
            if (i != data.getSize() - 1) {
                res.append(", ");
            }
        }
        res.append("]");
        return res.toString();
    }
}

```

> ä¸Šé¢ä»£ç å®ç°æ²¡æœ‰ä»»ä½•å‹åŠ›ã€‚

## 3. å¾ªç¯é˜Ÿåˆ—ï¼ˆæ•°ç»„ä¼˜åŒ–ï¼‰

ä¸Šé¢æ— è®ºæ˜¯æ•°ç»„è¿˜æ˜¯é“¾è¡¨éƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ— è®ºç”¨å“ªä¸€ç«¯éƒ½ä¼šæœ‰ä¸€ä¸ª`O(n)`çº§åˆ«çš„å¤æ‚åº¦ã€‚é‚£ä¹ˆå¦‚ä½•ä¼˜åŒ–å‘¢ä¹‹å‰çš„ä»£ç å‘¢ï¼Ÿå…¶å®è¿™ä¸ªä¸»è¦æ˜¯æ€è·¯ä¸Šçš„è½¬å˜ã€‚å¯ä»¥çœ‹ä¸‹é¢ï¼Œå¯¼å…¥äº†åŒæŒ‡é’ˆå°±å¥½å¤šäº†ã€‚

![image-20230531003405343](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531003405343.png)

> ä¸Šé¢è¿™ç§å°±æ˜¯å¾ªç¯é˜Ÿåˆ—ã€‚

é‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿå°±ä½¿ç”¨**é™æ€æ•°ç»„**

### é™æ€æ•°ç»„å®ç°

ä¸‹é¢ç›´æ¥ç”¨ä»£ç å®ç°

```java
/**
 * ä½¿ç”¨é™æ€æ•°ç»„å®ç°å¾ªç¯é˜Ÿåˆ—
 * ä¸ºä»€ä¹ˆä½¿ç”¨é™æ€å‘¢ï¼Ÿæ ¹æ®å¾ªç¯é˜Ÿåˆ—çš„ç‰¹æ€§ ä¸ºäº†çœç©ºé—´
 * ä½ åŠ¨æ€æ•°ç»„å¯ä»¥æ— é™æ‰©å®¹ ä¸ç¬¦åˆæˆ‘æ–‡æ¡£å†™çš„ç‰¹æ€§
 *
 * @param <T>
 */
public class _03_ArrayLoopQueue<T> implements Queue<T> {
    private T[] data; // è¡¨ç¤ºé™æ€æ•°ç»„
    private int head; // è¡¨ç¤ºå¤´
    private int tail; // è¡¨ç¤ºå°¾
    private int size; // è¡¨ç¤ºé•¿åº¦

    // åˆå§‹åŒ–å„ç§æ•°æ®
    public _03_ArrayLoopQueue(int capacity) {
        data = (T[]) new Object[capacity];
        head = tail = 0;
        size = 0;
    }

    @Override
    public int getSize() {
        return size;
    }

    /**
     * åªè¦å¤´å’Œå°¾ç›¸æ¥ å°±ä¸€å®šä¸ºç©º
     *
     * @return
     */
    @Override
    public boolean isEmpty() {
        return head == tail;
    }

    public boolean isFull() {
        if ((tail + 1) % data.length == head) {
            return true;
        }
        return false;
    }

    @Override
    public void enqueue(T e) {
        if (isFull()) throw new RuntimeException("queue is full");
        data[tail] = e;
        // tail++;é”™è¯¯ é‡ç‚¹ï¼è¿™æ ·æ˜¯ä¸å¯ä»¥çš„ å¦‚æœtailè¶Šç•Œè¿”å›åˆ°å‰é¢æ€ä¹ˆåŠ
        // æ‰€ä»¥ä½ è¦å–æ¨¡ï¼
        tail = (tail + 1) % data.length;
        size++;
    }

    @Override
    public T dequeue() {
        if (isEmpty()) throw new RuntimeException("queue is empty");
        T res = data[head];
        data[head] = null;
        head = (head + 1) % data.length;
        size--;
        return res;
    }

    @Override
    public T getFront() {
        return data[head];
    }

    @Override
    public String toString() {
        StringBuilder res = new StringBuilder();
        res.append("Queue é˜Ÿé¦–[");
        for (int i = 0; i < size; i++) {
            res.append(data[i]);
            if (i != size - 1) {
                res.append(", ");
            }
        }
        res.append("]");
        return res.toString();
    }
}

```

ä¸‹é¢è®²ä¸€ä¸‹ä¸Šé¢ä»£ç çš„å®ç°éš¾ç‚¹

**éš¾ç‚¹ 1 ä¸ºä»€ä¹ˆè¦å–æ¨¡ï¼Ÿ**

å¦‚æœä¸æ‡‚å–æ¨¡çš„ï¼Œå¯ä»¥æƒ³åƒä¸€ä¸‹ã€‚å¦‚æœ tail ç›®å‰åœ¨ index æ˜¯ 4ï¼Œé‚£ä¹ˆå¦‚æœæƒ³è¦å‘ä¸‹èµ°ï¼Œé‚£ä¹ˆè‚¯å®šè¦+1ï¼Œé‚£ä¹ˆ index å°±æ˜¯ 5ã€‚å¯æ˜¯æ²¡æœ‰ 5 å•Šï¼Ÿäºæ˜¯å…¶å®æœ¬è´¨å°±æ˜¯å–æ¨¡ï¼Œ`(4 + 1) / 5 = 0 ` äºæ˜¯æ‰¾åˆ°äº†ã€‚è¿™æ ·å°±å¯ä»¥ç»§ç»­å¾ªç¯èµ·æ¥äº†ã€‚

![image-20230531005002526](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531005002526.png)

ç”±äºæˆ‘å¯¹å–æ¨¡è¿˜ä¸æ˜¯ç‰¹åˆ«æœ‰æ„Ÿè§‰ï¼Œäºæ˜¯æˆ‘å°±å»é—®äº†ä¸€ä¸‹ ChatGPT![image-20230531013131871](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531013131871.png)

**éš¾ç‚¹ 2 å¦‚ä½•åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Ÿ**

åªè¦ä½ è‡ªå·±ç”»å›¾æ¨¡æ‹Ÿä¸€éï¼Œå¯ä»¥å‘ç°åªè¦ head å’Œ tail ç›¸æ’ã€‚è¡¨æ˜é˜Ÿåˆ—å°±æ˜¯ä¸ºç©ºã€‚

**éš¾ç‚¹ 3 å¦‚ä½•åˆ¤æ–­æ˜¯å¦å·²ç»æ»¡äº†ï¼Ÿ**

![image-20230531005840386](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531005840386.png)

### åŠ¨æ€æ•°ç»„æ‰©å®¹

å¦‚æœæŒ‰ç…§ä¸Šé¢çš„æ»¡çš„æƒ…å†µä¸‹å°±è¦æ‰©å®¹çš„ï¼Œé‚£ä¹ˆæ‰©å®¹æ€ä¹ˆå†™ï¼Ÿæ—¢ç„¶è¦æ‰©å®¹ï¼Œé‚£ä¹ˆä½ å°±è¦çŸ¥é“ä»¥å‰çš„å®¹é‡æ˜¯å¤šå°‘ã€‚

é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­ capacityï¼Ÿå› ä¸ºéœ€è¦ä¸€ä¸ªç©ºé—´ï¼Œæ‰€ä»¥å®é™…ä¸Šçš„å®¹é‡è¦æ¯”çœŸå®çš„å®¹é‡å°‘ 1 ä¸ªã€‚

```java
// è·å–å½“å‰é˜Ÿåˆ—å®¹é‡
public int getCapacity() {
    // å› ä¸ºä¸ºäº†åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ éœ€è¦ç‰ºç‰²ä¸€ä¸ªç©ºé—´
    return data.length - 1;
}
```

å› ä¸ºæˆ‘ä»¬åœ¨ä¸Šé¢ç‰ºç‰²æ‰äº†ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥å®¹é‡ç°åœ¨å°±æ˜¯æ•°ç»„é•¿åº¦ `data.length -1 `ã€‚æ‰©å¤§æˆå¤šå°‘å‘¢ï¼Ÿ

å¦‚æœä½ ç°åœ¨æ•°ç»„**æ•°æ®å®é™…é•¿åº¦ç°åœ¨æ˜¯ 6** (`è¿™é‡Œæ˜¯data.length - 1`)ï¼Œè¿™é‡Œä½ å¦‚æœæƒ³ä¸å‡ºæ¥çš„è¯ï¼Œä½ å°±æƒ³æ˜¯**å®é™…å®¹é‡çš„ 2 å€ + 1 ä¸ªå¤šä½™çš„ç©ºé—´** ï¼Œè¿™æ ·å°±å¯ä»¥ã€‚

| å®é™…é•¿åº¦ data.length -1 | ç›®å‰å®¹é‡ capacity | æ‰©å®¹åä½ éœ€è¦    | è®¡ç®—å…¬å¼                    | ä¹Ÿå°±æ˜¯       |
| ----------------------- | ----------------- | --------------- | --------------------------- | ------------ |
| 6                       | 7                 | 6 \* 2 +1 = 13  | `[(data.length - 1)]*2 + 1` | 6\*2 +1 = 13 |
| 5                       | 6                 | 5 \* 2 + 1 = 11 |                             | 11           |
| 4                       | 5                 | 4 \* 2 + 1 = 8  |                             | 9            |

æŒ‰ç…§ä¸Šé¢çš„å…¬å¼ å¯ä»¥å†™å‡ºä¸‹é¢

```java
// è°ƒç”¨ ç›¸å½“äºæ˜¯-2äº†
resize(getCapacity() * 2);
// ä½†ä½ åªèƒ½-1 æ‰€ä»¥æœ€åéœ€è¦+1
public void resize(int newCapacity) {
    data = (T[]) new Object[newCapacity + 1];

}
```

> å…¶å®åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘å°±æ˜¯éœ€è¦å®é™…é•¿åº¦çš„ 2 å€ + 1 çš„å¤šä½™çš„å¤Ÿæˆ‘åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡å¤´å°¾çš„ã€‚

æ¥ä¸‹æ¥çš„éš¾ç‚¹å°±æ˜¯éå†æ—¶å€™çš„æ–°æ‰©å®¹åï¼Œå¦‚ä½•è®¡ç®—æ•°ç»„çš„ä½ç½®ã€‚å¦‚æœæŒ‰ç…§ä»¥å‰ï¼Œä½ åªä¼šæƒ³ç€`newData[i] = data[i]` ä½†æ˜¯ç”±äºè¿™ä¸ªæ˜¯å¾ªç¯é˜Ÿåˆ—ï¼Œä¸” index ä¸º 0 çš„åœ°æ–¹ä¸ä¸€å®šå°±æ˜¯ headã€‚æ‰€ä»¥ä½ è¦è®¡ç®—ä½ ä¸ head çš„è·ç¦»ã€‚å¦‚æœä¸æ‡‚çš„è¯ï¼Œå°±å…ˆçœ‹çœ‹ä¸‹é¢çš„å›¾

![image-20230531011929770](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531011929770.png)

å¦‚æœè¿˜æ˜¯ä¸æ‡‚çš„è¯ã€‚å¯ä»¥çœ‹æˆ‘è¿™ä¸ªè¯´æ˜

![image-20230531153536314](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230531153536314.png)

æœ€åå®Œæ•´çš„ä»£ç å¦‚ä¸‹

```java
package com.chi.line.queue;

import java.util.Arrays;

/**
 * è¿™é‡Œè¦å†™ä¸€ä¸ªå¯ä»¥è¿›è¡Œæ‰©å®¹ç¼©å®¹çš„é˜Ÿåˆ—
 */
public class _04_ResizeLoopQueue<T> implements Queue<T> {
    private T[] data;
    private int head;
    private int tail;
    private int size; // å®é™…é•¿åº¦

    public _04_ResizeLoopQueue() {
        this(10);
    }

    public _04_ResizeLoopQueue(int capacity) {
        data = (T[]) new Object[capacity];
        head = tail = 0;
        size = 0;
    }

    // è¿™é‡Œæ˜¯å®é™…ä¸ªæ•°
    @Override
    public int getSize() {
        return size;
    }

    // è·å–å½“å‰é˜Ÿåˆ—å®¹é‡
    public int getCapacity() {
        // å› ä¸ºä¸ºäº†åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ éœ€è¦ç‰ºç‰²ä¸€ä¸ªç©ºé—´
        return data.length - 1;
    }

    @Override
    public boolean isEmpty() {
        return head == tail;
    }

    @Override
    public void enqueue(T e) {
        if ((tail + 1) % data.length == head) {
            // é˜Ÿåˆ—æ»¡äº†
            resize(getCapacity() * 2);
        }
        data[tail] = e;
        size++;
        tail = (tail + 1) % data.length;
    }

    @Override
    public T dequeue() {
        if (isEmpty()) throw new RuntimeException("queue is empty");
        T res = data[head];
        data[head] = null;
        size--;
        head = (head + 1) % data.length;
        if (size == getCapacity() / 4) {
            resize(getCapacity() / 2);
        }
        return res;
    }

    @Override
    public T getFront() {
        return data[head];
    }

    public boolean isFull() {
        if ((tail + 1) % data.length == head) {
            return true;
        }
        return false;
    }


    public void resize(int newCapacity) {
        T[] newData = (T[]) new Object[newCapacity + 1];
        for (int i = 0; i < size; i++) {
            // è¿™é‡Œå¾ˆéš¾ç†è§£ å¾ˆé‡è¦ å»ºè®®ä¸€æ­¥æ­¥ç”»å›¾
            newData[i] = data[(i + head) % data.length];
        }
        // åˆå§‹åŒ–ä¸ºæ–°çš„æ‰©å®¹åæ•°ç»„
        data = newData;
        head = 0;
        tail = size;
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(String.format("Queue : size = %d, capacity = %d\n", size, getCapacity()));
        sb.append("é˜Ÿé¦–[");
        for (int i = head; i != tail; i = (i + 1) % data.length) {
            sb.append(data[i]);
            if ((i + 1) % data.length != tail) sb.append(", ");
        }
        sb.append("]");
        return sb.toString();
    }
}

```

## 4. é“¾è¡¨ä¼˜åŒ–

ä¸Šé¢å®ç°é˜Ÿåˆ—çš„æ—¶å€™ç”¨äº†é“¾è¡¨ï¼Œä½†æ˜¯ä½¿ç”¨é“¾è¡¨ï¼Œæ€»æ˜¯æœ‰ä¸€ç«¯çš„æ—¶é—´å¤æ‚åº¦ä¼šæ˜¯`O(n)`ã€‚å› ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹åœ¨æ‰¾çš„æ—¶å€™æ€»æ˜¯`O(n)`ï¼Œé‚£æ€ä¹ˆææ‰èƒ½ä¼˜åŒ–å‘¢ï¼Ÿæ‰€ä»¥è¿™é‡Œä¹Ÿæ•ˆä»¿å¾ªç¯é˜Ÿåˆ—é‡Œçš„æ•°ç»„ï¼Œä½¿ç”¨**åŒæŒ‡é’ˆ**ã€‚

> è¿™ä¸ªåŒæŒ‡é’ˆéœ€è¦æ€ä¹ˆç”¨å‘¢ï¼Ÿæ˜¯ä¸æ˜¯ä»»æ„ä¸€ç«¯éƒ½å¯ä»¥ in å’Œ out å‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¯ä¸æ˜¯çš„ã€‚æ ¹æ®ä¸‹é¢å›¾å¯ä»¥çœ‹å‡ºæ¥ã€‚

![image-20230601153502364](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601153502364.png)

é“¾è¡¨æ˜¯æ“ä½œå¤´å¾ˆå¿«ï¼Œæ“ä½œå°¾å¾ˆæ…¢çš„æ•°æ®ç»“æ„ã€‚ï¼ˆå› ä¸ºå°¾å·´éœ€è¦ä¸€ä¸ªä¸ªéå†çš„æ‰¾ã€‚å¦‚æœä½ æƒ³åœ¨é“¾è¡¨å°¾éƒ¨åˆ é™¤å…ƒç´ ï¼Œä½ å°±è¦æ‰¾åˆ° pre å‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰¾åˆ° prev å‰ä¸€ä¸ªå…ƒç´ çš„æ“ä½œä¾ç„¶æ˜¯`O(n)`ã€‚æ‰€ä»¥å°±é‡‡ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼Œä½¿ç”¨é“¾è¡¨å°¾éƒ¨æ¥å…¥é˜Ÿï¼Œé“¾è¡¨å¤´éƒ¨æ¥å‡ºé˜Ÿã€‚

å…¥é˜Ÿæ“ä½œ

![image-20230601154725728](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601154725728.png)

å‡ºé˜Ÿï¼Œä¹Ÿå°±æ˜¯åˆ é™¤é˜Ÿé¦–çš„è¿™ä¸ªæ“ä½œã€‚ä¹Ÿè¦è¿›è¡Œåˆ¤æ–­çš„ã€‚

![image-20230601155131136](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601155131136.png)

ä¸‹é¢å°±å¼€å§‹å…·ä½“çš„ä»£ç å®ç°ã€‚

```java
public class _05_UpLinkedListQueue<T> implements Queue<T> {

    private class Node {
        private Node next;
        private T e;

        public Node(T e, Node next) {
            this.e = e;
            this.next = next;
        }

        public Node(T e) {
            this(e, null);
        }

        @Override
        public String toString() {
            return e.toString();
        }
    }

    private Node head;
    private Node tail;
    private int size;

    public _05_UpLinkedListQueue() {
        head = tail = null;
        size = 0;
    }


    @Override
    public int getSize() {
        return size;
    }

    @Override
    public boolean isEmpty() {
        return size == 0;
    }

    // å…¥é˜Ÿæ“ä½œ
    @Override
    public void enqueue(T e) {
        Node newNode = new Node(e);
        // è¦åˆ†æƒ…å†µï¼Œé˜Ÿåˆ—ä¸ºç©ºå’Œä¸ä¸ºç©º
        if (tail == null) {
            tail = newNode;
            head = tail;
        } else {
            tail.next = newNode;
            tail = newNode;
        }
        size++;
    }

    @Override
    public T dequeue() {
        if (isEmpty()) throw new RuntimeException("queue is null");
        // å‡ºé˜Ÿè¦åˆ†æƒ…å†µï¼Œé˜Ÿåˆ—åªæœ‰1ä¸ªå’Œå¤šä¸ª
        // å¦‚ä½•åˆ¤æ–­åªæœ‰1ä¸ªå‘¢ï¼Ÿ
        Node delNode = head;
        head = head.next;
        // å¦‚æœæ­¤æ—¶é˜Ÿåˆ—åªæœ‰1ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆtailä¹Ÿè¦æŒ‡å‘null
        if (head == null) tail = null;
        // è¿™ä¸€æ­¥å¾ˆé‡è¦
        delNode.next = null;
        size--;
        return delNode.e;
    }

    @Override
    public T getFront() {
        if (isEmpty()) throw new RuntimeException("queue is null");
        return head.e;
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("Queue: é˜Ÿé¦–[");
        Node cur = head;
        while (cur != null) {
            sb.append(cur.e + "->");
            cur = cur.next;
        }
        sb.append("null ]");
        return sb.toString();
    }
}

```

## 5. æµ‹è¯•æ€§èƒ½

ä¸Šé¢æ€»å…±å…¶å®å®ç°äº† 4 ä¸ªé˜Ÿåˆ—

- åŠ¨æ€æ•°ç»„å®ç°çš„æœ€æœ€æ™®é€šçš„é˜Ÿåˆ—ï¼Œè¿™é‡Œä½¿ç”¨äº†å¯ä»¥è‡ªåŠ¨æ‰©å®¹çš„åŠ¨æ€æ•°ç»„ã€‚
- é“¾è¡¨å®ç°ã€‚é“¾è¡¨å¤©ç„¶å°±è‡ªå¸¦æ‰©å®¹å±æ€§ã€‚æ‰€ä»¥è¿™é‡Œåªæ˜¯ç”¨äº†æ™®é€šçš„é“¾è¡¨ã€‚

ä»¥ä¸Šä¸¤ä¸ªå±äºåŸºç¡€å®ç°ã€‚ä¸‹é¢æ˜¯ä¼˜åŒ–å®ç°ã€‚

- å¾ªç¯é˜Ÿåˆ—ã€‚è¿™é‡Œçš„å¾ªç¯é˜Ÿåˆ—ä½¿ç”¨äº†å¯ä»¥æ‰©å®¹ç¼©å®¹çš„åŠ¨æ€æ•°ç»„ã€‚
- é“¾è¡¨ä¼˜åŒ–ä¹‹åçš„é˜Ÿåˆ—ã€‚

ç»“æœ

```java
package com.chi.line.queue;

import java.util.Random;

/**
 * æ€§èƒ½æµ‹è¯•
 */
public class PerformanceTest {
    private static Random random = new Random();

    private static double testQueue(Queue<Integer> queue, int cnt) {
        long startTime = System.nanoTime();

        for (int i = 0; i < cnt; i++) {
            queue.enqueue(random.nextInt());
        }
        for (int i = 0; i < cnt; i++) {
            queue.dequeue();
        }

        return (System.nanoTime() - startTime) / 1000_000_000.0;
    }

    public static void main(String[] args) {
        int cnt = 1000000;
        Queue<Integer> queue = new _01_ArrayQueue<>();
        // double time1 = testQueue(queue, cnt);
        // System.out.println("_01_ArrayQueue æ™®é€šé™æ€æ•°ç»„é˜Ÿåˆ— èŠ±è´¹çš„æ—¶é—´ï¼š" + time1);
        //
        // queue = new _02_LinkedListQueue<>();
        // double time2 = testQueue(queue, cnt);
        // System.out.println("_02_LinkedListQueue æ™®é€šé“¾è¡¨é˜Ÿåˆ— èŠ±è´¹çš„æ—¶é—´ï¼š" + time2);

        queue = new _04_ResizeLoopQueue<>(20);
        double time3 = testQueue(queue, cnt);
        System.out.println("_04_ResizeLoopQueue å¾ªç¯é˜Ÿåˆ—[æ•°ç»„ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š" + time3);

        queue = new _05_UpLinkedListQueue<>();
        double time4 = testQueue(queue, cnt);
        System.out.println("_05_UpLinkedListQueue é˜Ÿåˆ—[é“¾è¡¨ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š" + time4);
    }
}

```

```
// 100000 çº§åˆ«
_04_ResizeLoopQueue å¾ªç¯é˜Ÿåˆ—[æ•°ç»„ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š0.007567083
_05_UpLinkedListQueue é˜Ÿåˆ—[é“¾è¡¨ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š0.006413417
// 1000000 ç™¾ä¸‡çº§åˆ«
_04_ResizeLoopQueue å¾ªç¯é˜Ÿåˆ—[æ•°ç»„ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š0.060685333
_05_UpLinkedListQueue é˜Ÿåˆ—[é“¾è¡¨ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š0.171456542
// 10000000 åƒä¸‡çº§åˆ«
_04_ResizeLoopQueue å¾ªç¯é˜Ÿåˆ—[æ•°ç»„ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š1.8152375
_05_UpLinkedListQueue é˜Ÿåˆ—[é“¾è¡¨ä¼˜åŒ–] èŠ±è´¹çš„æ—¶é—´ï¼š2.229586
```

å¯ä»¥åœ¨æ•°æ®é‡æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œå¾ªç¯é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯**é“¾è¡¨æ˜¯ä¼˜äºæ•°ç»„**çš„ã€‚åœ¨ç™¾ä¸‡çº§åˆ«åŠä»¥ä¸Šçš„æ—¶å€™ï¼Œ**æ•°ç»„æ˜¯ä¼˜äºé“¾è¡¨**çš„ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæ•°ç»„éœ€è¦æ‰©å®¹ç¼©å®¹ï¼Œåœ¨å°çš„æ—¶å€™å¾ˆéš¾ä½“ç°å‡ºä¼˜åŠ¿ï¼Œéœ€è¦ä¸æ–­çš„æ‰©å®¹ç¼©å®¹ã€‚ä½†æ˜¯è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œé“¾è¡¨éœ€è¦æ–°å¢æŒ‡å‘èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™å°±æ‹‰èƒ¯äº†ã€‚

## 6. åŒç«¯é˜Ÿåˆ—

ä»€ä¹ˆæ˜¯åŒç«¯é˜Ÿåˆ—ï¼Ÿä»¥å‰å°†çš„éƒ½æ˜¯ä¸€ä¸ªå¤´è´Ÿè´£å‡ºæ¥ï¼Œä¸€ä¸ªå¤´è´Ÿè´£å‡ºå»ã€‚åŒç«¯é˜Ÿåˆ—å°±æ˜¯æ—¢å¯ä»¥å‡ºä¹Ÿå¯ä»¥å…¥ã€‚

é‚£æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ

### åŒå‘é“¾è¡¨å®ç°

è¿™é‡Œä¸»è¦ç”¨åˆ°äº†åŒå‘é“¾è¡¨ï¼Œè¿™é‡Œä¹Ÿæ²¡æœ‰è®²è§£ï¼Œæ˜¯æˆ‘çœ‹ ChatGPT ç»“åˆæˆ‘è‡ªå·±ç”»å›¾æ¥å®ç°ã€‚

å¯¹äºåŒç«¯é˜Ÿåˆ—è€Œè¨€ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨åŒå‘é“¾è¡¨æ¥å®ç°ã€‚åŒå‘é“¾è¡¨çš„ç‰¹ç‚¹æ˜¯å¯ä»¥ä»**å¤´éƒ¨å’Œå°¾éƒ¨éƒ½è¿›è¡Œæ’å…¥å’Œåˆ é™¤**æ“ä½œï¼Œå› æ­¤éå¸¸é€‚åˆå®ç°åŒç«¯é˜Ÿåˆ—çš„éœ€æ±‚ã€‚é€šè¿‡åŒå‘é“¾è¡¨ï¼Œå¯ä»¥åœ¨**å¸¸æ•°æ—¶é—´å†…æ‰§è¡Œå¤´éƒ¨å’Œå°¾éƒ¨çš„æ’å…¥å’Œåˆ é™¤**æ“ä½œã€‚

```java
package com.chi.line.queue;

import java.util.NoSuchElementException;

/**
 * ä½¿ç”¨åŒå‘é“¾è¡¨å®ç°åŒç«¯é˜Ÿåˆ—
 */
public class _06_DoubleLinkedDeque<T> {
    private class Node<T> {
        public Node prev;
        public Node next;
        private T e;

        public Node(T e) {
            this.e = e;
        }
    }

    // ä½œä¸ºä¸€ä¸ªåŒç«¯é˜Ÿåˆ— åˆå§‹åŒ–å¤´å°¾size
    Node<T> head;
    Node<T> tail;
    int size;

    public _06_DoubleLinkedDeque() {
        head = null;
        tail = null;
        size = 0;
    }

    public boolean isEmpty() {
        return size == 0;
    }

    public int getSize() {
        return size;
    }

    // æ’å…¥å¤´ æ—¶é—´å¤æ‚åº¦O(1)
    public void addFirst(T e) {
        Node newNode = new Node(e);
        // å¦‚æœæ˜¯ç©ºçš„
        if (isEmpty()) {
            head = newNode;
            tail = newNode;
        } else {
            newNode.next = head;
            head.prev = newNode;
            head = newNode;
        }
        size++;
    }

    // æ’å…¥å°¾å·´ æ—¶é—´å¤æ‚åº¦O(1)
    public void addLast(T e) {
        Node newNode = new Node(e);
        if (isEmpty()) {
            head = newNode;
            tail = newNode;
        } else {
            // ç›´æ¥ç”»å›¾æœ€æ¸…æ™°
            newNode.prev = tail;
            tail.next = newNode;
            tail = newNode;
        }
        size++;
    }

    // åˆ é™¤å¤´èŠ‚ç‚¹ æ—¶é—´å¤æ‚åº¦O(1)
    public T removeFirst() {
        if (isEmpty()) throw new RuntimeException("deque is empty");
        Node<T> delNode = head;
        // è¯´æ˜æ­¤æ—¶åªæœ‰1ä¸ªå…ƒç´ 
        if (head == tail) {
            head = null;
            tail = null;
        } else {
            // è¿™é‡Œç†è§£èµ·æ¥å¯èƒ½ä¼šæœ‰å›°éš¾
            head = head.next;
            head.prev = null;
        }
        size--;
        return delNode.e;
    }

    public T removeLast() {
        if (isEmpty()) throw new RuntimeException("deque is empty");
        Node<T> delNode = head;
        // è¯´æ˜æ­¤æ—¶åªæœ‰1ä¸ªå…ƒç´ 
        if (head == tail) {
            head = null;
            tail = null;
        } else {
            // ç”»å›¾ åŒå‘é“¾è¡¨å›¾
            tail = tail.prev;
            tail.next = null;
        }
        size--;
        return delNode.e;
    }

    public T getFirst() {
        if (isEmpty()) {
            throw new NoSuchElementException("Deque is empty");
        }
        return head.e;
    }

    public T getLast() {
        if (isEmpty()) {
            throw new NoSuchElementException("Deque is empty");
        }
        return tail.e;
    }
}

```

### å¾ªç¯æ•°ç»„å®ç°

è¿™ä¸ªä¹Ÿæ˜¯å‚è€ƒ ChatGPT ç›´æ¥å†™å‡ºæ¥çš„ï¼Œä½¿ç”¨äº†å¾ªç¯æ•°ç»„ç”¨æ¥å®ç°çš„ã€‚

```java
package com.chi.line.queue;

import java.util.NoSuchElementException;

public class _07_ArrayDeque<T> {
    private static final int DEFAULT_CAPACITY = 10;
    private T[] array;
    private int size;
    private int front;
    private int rear;

    public _07_ArrayDeque() {
        // åˆå§‹åŒ–
        array = (T[]) new Object[DEFAULT_CAPACITY];
        size = 0;
        front = 0;
        rear = 0;
    }

    public int size() {
        return size;
    }

    public boolean isEmpty() {
        return size == 0;
    }

    public void addFirst(T element) {
        if (size == array.length) {
            resizeArray();
        }
        // è¿™é‡Œä½¿ç”¨äº†å¾ªç¯
        front = (front - 1 + array.length) % array.length;
        array[front] = element;
        size++;
    }

    public void addLast(T element) {
        if (size == array.length) {
            resizeArray();
        }
        array[rear] = element;
        rear = (rear + 1) % array.length;
        size++;
    }

    public T removeFirst() {
        if (isEmpty()) {
            throw new NoSuchElementException("Deque is empty");
        }
        T removed = array[front];
        array[front] = null;
        front = (front + 1) % array.length;
        size--;
        return removed;
    }

    public T removeLast() {
        if (isEmpty()) {
            throw new NoSuchElementException("Deque is empty");
        }
        rear = (rear - 1 + array.length) % array.length;
        T removed = array[rear];
        array[rear] = null;
        size--;
        return removed;
    }

    public T getFirst() {
        if (isEmpty()) {
            throw new NoSuchElementException("Deque is empty");
        }
        return array[front];
    }

    public T getLast() {
        if (isEmpty()) {
            throw new NoSuchElementException("Deque is empty");
        }
        return array[(rear - 1 + array.length) % array.length];
    }

    private void resizeArray() {
        T[] newArray = (T[]) new Object[array.length * 2];
        for (int i = 0; i < size; i++) {
            newArray[i] = array[(front + i) % array.length];
        }
        array = newArray;
        front = 0;
        rear = size;
    }
}

```

> è¿™ä¸ªå¾ªç¯æ•°ç»„æœ‰ç‚¹éš¾ã€‚å¦‚æœå…ˆçœ‹ä¸æ‡‚ï¼Œé‚£ä¹ˆå°±æ˜¯ä½ å¾ªç¯æ•°ç»„è¿™ä¸ªæ²¡å­¦å¥½ã€‚

## 7. é˜Ÿåˆ—å®¹é‡

![image-20230601161045196](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601161045196.png)

é‚£æ€ä¹ˆå®ç°æœ‰å®¹é‡çš„å‘¢ï¼Ÿå…¶å®åªè¦åœ¨ä»£ç çš„æ—¶å€™åŠ ä¸Šä¸€ä¸ªåˆ¤æ–­å°±å¥½ï¼Œè¶…è¿‡ç›´æ¥æŠ¥é”™ã€‚

## 8. Java é‡Œçš„é˜Ÿåˆ—

![image-20230601173952221](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601173952221.png)

- Queue
  - Deque
    - ArrayDeque
    - LinkedList

å·®ä¸å¤šå°±æ˜¯ä¸Šé¢çš„æ„Ÿè§‰ã€‚

é¦–å…ˆ Java é‡Œæ˜¯æœ‰å†™å¥½çš„é˜Ÿåˆ—çš„ï¼Œè€Œä¸”æ˜¯åŒç«¯é˜Ÿåˆ—ã€‚Dequeã€‚è€Œä¸”è¿™ä¸ªåŒç«¯é˜Ÿåˆ—è¿˜æä¾›äº† Stack çš„æ¥å£ã€‚

```
1. Stack æ˜¯åŸºäº java.util.Vector å®ç°çš„ï¼Œ java.util.Vector åº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼Œä½†æ˜¯å®ƒçš„æ¯ä¸ªæ–¹æ³•éƒ½åŠ äº†synchronized å…³é”®å­—ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒStack çš„æ“ä½œæ€§èƒ½ä¸å¤ªå¥½

2.JDK å®˜æ–¹æ›´åŠ çš„æ¨èä½¿ç”¨ Deque åŒç«¯é˜Ÿåˆ—æ¥å®ç°æ ˆçš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ä»£ç ï¼š import java.util.Deque;
```

```java
// ä½¿ç”¨æ•°ç»„å®ç°
import java.util.ArrayDeque;

Deque<Integer> stack = new ArrayDeque<>0ï¼›
stack.push (2)ï¼›
stack.push (4)ï¼›
stack.push(3)ï¼›

system.out.println(stack.peeko); // 3
system.out.println(stack.popo); // 3
system.out.printin (stack.isEmptyO); // false

// ä½¿ç”¨é“¾è¡¨å®ç°

import java.util.LinkedList;

Deque<Integer> stack =new LinkedListOï¼›
stack.push (2)ï¼›
stack.push (4)ï¼›
stack.push (3)ï¼›
system.out.println (stack .peeko); // 3
system.out.println(stack.popo); // 3
system.out.println (stack .isEmptyo); // false
```

Java é‡Œçš„ Stack â†’ å¤šçº¿ç¨‹ã€‚æ‰€ä»¥å•çº¿ç¨‹ ä¸å»ºè®®ç”¨ å› ä¸ºè¿™ä¸ªæ˜¯çº¿ç¨‹å®‰å…¨çš„

Java é‡Œçš„ Deque â†’ å› ä¸ºè¿™ä¸ªå®ç°äº†æ ˆï¼Œæ‰€ä»¥æ ˆèƒ½ç”¨çš„è¿™ä¸ªéƒ½èƒ½ç”¨ã€‚åè€Œä½ ç”¨è¿™ä¸ªä¹Ÿèƒ½å®ç°å’Œæ ˆä¸€æ ·çš„æ“ä½œã€‚

## [å‰‘æŒ‡ Offer 09. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—](https://leetcode.cn/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/)

```
ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHeadÂ æ“ä½œè¿”å› -1 )

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼š
["CQueue","appendTail","deleteHead","deleteHead","deleteHead"]
[[],[3],[],[],[]]
è¾“å‡ºï¼š[null,null,3,-1,-1]
ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼š
["CQueue","deleteHead","appendTail","appendTail","deleteHead","deleteHead"]
[[],[],[5],[2],[],[]]
è¾“å‡ºï¼š[null,-1,null,null,5,2]
æç¤ºï¼š

1 <= values <= 10000
æœ€å¤šä¼šå¯¹Â appendTailã€deleteHead è¿›è¡ŒÂ 10000Â æ¬¡è°ƒç”¨
```

### æ€è·¯ä¸€

å°±æ˜¯ä¸‹é¢çš„å›¾ï¼Œæ¯ä¸€æ¬¡

![image-20230601175825717](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601175825717.png)

ç›´æ¥ä»£ç å®ç°

```java
class CQueue {
    private Stack<Integer> stack1;
    private Stack<Integer> stack2;

    public CQueue() {
        this.stack1 = new Stack<>();
        this.stack2 = new Stack<>();
    }

    public void appendTail(int value) {
        // ä¿è¯stack2é‡Œé¢çš„å…¨éƒ¨éƒ½åŠ è¿›å»stack1é‡Œäº†
        // ç›®çš„æ˜¯ä¸ºäº†ä¿è¯æœ€åè¿›æ¥çš„æ’åœ¨åé¢
        while(!stack2.isEmpty()){
            stack1.push(stack2.pop());
        }
        stack1.push(value);
    }

    public int deleteHead() {
        // ä¿è¯stack1é‡Œé¢çš„å…¨éƒ¨éƒ½åŠ è¿›å»äº†stack2é‡Œé¢
        while(!stack1.isEmpty()) {
            stack2.push(stack1.pop());
        }
        if(stack2.isEmpty()) return -1;
        return stack2.pop();
    }
}
```

### æ€è·¯äºŒ

ä¸‹é¢å®ç°ä¸€ä¸ªå¦ä¸€ä¸ª

![image-20230601232934447](https://raw.githubusercontent.com/chihokyo/image_host/develop/image-20230601232934447.png)

è¿™æ ·å³ä½¿ä½ ç°åœ¨æ”¾çš„æ˜¯ 10ï¼Œæ¥ä¸‹æ¥åœ¨æ”¾ 6,9,5 ç­‰ç­‰ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚å› ä¸ºä¸€æ—¦ä½  deleteHeadï¼Œä½ ä¼šå‘ç°è¿˜æ˜¯ä» 7 å¼€å§‹ï¼Œå¹¶ä¸å½±å“ã€‚

æ‰€ä»¥æ·»åŠ è¿™ä¸ªæ“ä½œï¼Œæ˜¯æ²¡å¿…è¦ä¿è¯ stack æ¸…ç©ºçš„ã€‚

ä»£ç å®ç°å¦‚ä¸‹

```java
package com.chi.line.queue;

import java.util.Stack;

class CQueue {
    private Stack<Integer> stack1;
    private Stack<Integer> stack2;

    public CQueue() {
        this.stack1 = new Stack<>();
        this.stack2 = new Stack<>();
    }

    // æ—¶é—´å¤æ‚åº¦O(1)
    public void appendTail(int value) {
        stack1.push(value);
    }

    // æ—¶é—´å¤æ‚åº¦O(n)
    public int deleteHead() {
        // è¿™ä¸ªæ—¶å€™å°±è¦åˆ¤æ–­ å¦‚æœstack2ä¸ºç©ºï¼Œé‚£ä¹ˆè¯´æ˜ä½ è¿˜æ˜¯è¦æŠŠstack1æ‰€æœ‰å…ƒç´ éƒ½åŠ è¿›å»stack2 è¿™æ ·æ‰èƒ½å‡ºæ¥
        if(stack2.isEmpty()) {
            while (!stack1.isEmpty()) stack2.push(stack1.pop());
        }
        if(stack2.isEmpty()) return -1;
        return stack2.pop();
    }
}

```

é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒLinkedList æ€§èƒ½æ›´å¥½

```java
class CQueue {
    LinkedList<Integer> stack1, stack2;

    public CQueue() {
        stack1 = new LinkedList<>();
        stack2 = new LinkedList<>();
    }

    public void appendTail(int value) {
        stack1.addLast(value);
    }
    // åˆ é™¤éœ€è¦åˆ¤æ–­ä»¥ä¸‹3æƒ…å†µ
    // â‘  stack2ä¸ºç©ºï¼Œé‚£ä¹ˆéœ€è¦æŠŠ1çš„å…¨éƒ¨ç»™äº†2ä¹‹åå¼¹å‡º
    // â‘¡ stack2ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥å¼¹å‡º
    // â‘¢ åœ¨æŠŠ1å…¨éƒ¨ç»™äº†2ä¹‹åè¿˜ä¾ç„¶ä¸ºç©ºï¼Œè¯æ˜2éƒ½ä¸ºç©º ç›´æ¥-1
    public int deleteHead() {
        if(!stack2.isEmpty()) return stack2.removeLast();
        if(stack1.isEmpty()) return -1; // å…¶å®è¿›è¡Œåˆ°è¿™é‡Œè¯æ˜1å’Œ2éƒ½å·²ç»æ˜¯ç©ºçš„äº†
        while(!stack1.isEmpty()) {
            stack2.addLast(stack1.removeLast());
        }
        return stack2.removeLast();
    }
}
```
